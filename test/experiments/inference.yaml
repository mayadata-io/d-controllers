# This is an internal job used by test suite runner
# to evaluate if other jobs were successful or failed
apiVersion: metacontroller.app/v1
kind: Job
metadata:
  name: inference # do-not-change
  namespace: d-testing # do-not-change
  labels:
    d-testing.metacontroller.app/internal: "true"
spec:
  tasks:
  # This is also an example of a Job making use of another
  # Job as its task
  - name: assert-all-tests-are-completed
    assert: 
      state: 
        kind: Job
        apiVersion: metacontroller.app/v1
        metadata:
          labels:
            d-testing.metacontroller.app/enabled: "true"
        status:
          phase: Completed
      stateCheck:
        stateCheckOperator: ListCountEquals
        count: 5 # number of successfully completed tests i.e. jobs
---