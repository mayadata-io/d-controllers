apiVersion: metacontroller.app/v1
kind: Job
metadata:
  name: assert-absence-of-deprecated-daemonsets
  namespace: d-testing
  labels:
    d-testing.metacontroller.app/enabled: "true"
spec:
  tasks:
  - name: assert-daemonset-with-extensions-v1beta1
    failFast: OnDiscoveryError # TODO (refactor)
    ignoreError: AsWarning # TODO (refactor)
    assert: 
      state: 
        kind: DaemonSet
        apiVersion: extensions/v1beta1
      stateCheck:
        stateCheckOperator: ListCountEquals
        count: 0
---